<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/markdown/copy.md at 2018-08-30
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180830" />
    <meta http-equiv="Content-Language" content="en" />
    <title>jaxb2-rich-contract-plugin &#x2013; copy</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>JAXB XJC extended contract generation plugin</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2018-08-30<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.0.0-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Getting Started</li>
    <li><a href="index.html" title="Overview"><span class="none"></span>Overview</a></li>
    <li><a href="getting.html" title="Download"><span class="none"></span>Download</a></li>
    <li><a href="history.html" title="Version History"><span class="none"></span>Version History</a></li>
    <li><a href="usage.html" title="Usage"><span class="none"></span>Usage</a></li>
      <li class="nav-header">XJC Plugin Options</li>
    <li><a href="fluent-builder.html" title="fluent-builder"><span class="none"></span>fluent-builder</a></li>
    <li><a href="group-contract.html" title="group-contract"><span class="none"></span>group-contract</a></li>
    <li><a href="immutable.html" title="immutable"><span class="none"></span>immutable</a></li>
    <li><a href="modifier.html" title="modifier"><span class="none"></span>modifier</a></li>
    <li><a href="clone.html" title="clone"><span class="none"></span>clone</a></li>
    <li class="active"><a href="#"><span class="none"></span>copy</a></li>
    <li><a href="constrained-properties.html" title="constrained-properties"><span class="none"></span>constrained-properties</a></li>
    <li><a href="meta.html" title="meta"><span class="none"></span>meta</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<div class="section">
<h2><a name="copy"></a>copy</h2>
<div class="section">
<h3><a name="Motivation"></a>Motivation</h3>
<p>Sometimes it is necessary to create a deep copy of an object. There are various approaches to this. The &#x201c;copy&#x201d; plugin defines its own interface, contract, and definitions that are somewhat different from the standard java &#x201c;java.lang.Cloneable&#x201d; contract. The entry point generated in the source code is called <tt>createCopy</tt>, there are optionally also copy constructors.</p></div>
<div class="section">
<h3><a name="Function"></a>Function</h3>
<p>The <tt>copy</tt> plugin generates a deep clone method for each of the generated classes, based on the following assumptions:</p>
<ul>

<li>Instances of any other classes implementing the <tt>com.kscs.util.jaxb.Copyable</tt> interface are copyable by the same semantics as &#x201c;this&#x201d;.</li>
<li>Objects implementing <tt>java.lang.Cloneable</tt> and not throwing &#x201c;CloneNotSupportedException&#x201d; are also reliably cloneable by their &#x201c;clone&#x201d; Method.</li>
<li>Objects not implementing <tt>java.lang.Cloneable</tt> or primitive types are assumed to be immutable, their references are copied over, they are not cloned.</li>
<li>Optionally, generates a &#x201c;partial createCopy&#x201d; method that takes a <tt>PropertyTree</tt> instance which represents a specification of the nodes in the object tree to copy. The PropertyTree is built up by an intuitive builder pattern:

<div>
<div>
<pre class="source">final PropertyTree excludeEmployees = PropertyTree.builder().with(&quot;company&quot;).with(&quot;employees&quot;).build();
</pre></div></div>
</li>
<li>

<p>There is also a type-safe way to build a PropertyPath instance by using a generated classes&#x2019; <tt>Selector</tt> sub structure. The following will generate the same selection as above:</p>

<div>
<div>
<pre class="source">final PropertyTree excludeEmployees = Business.Select.root().company().employees().build()
</pre></div></div>
</li>
</ul>
<p>Then, you would partially clone an object tree like this:</p>

<div>
<div>
<pre class="source">	final BusinessPartner businessPartnerCopy = businessPartner.createCopy(excludeEmployees, PropertyTreeUse.EXCLUDE);
</pre></div></div>

<p>Which is the same as</p>

<div>
<div>
<pre class="source">	final BusinessPartner businessPartnerCopy = businessPartner.copyExcept(excludeEmployees);
</pre></div></div>

<p>This way, the copy of the original <tt>businessPartner</tt> will have no employees attached to the contained <tt>company</tt>. It is also possible to copy only a specific subset of the original object tree, excluding everything else. The inverse result of the above would be generated by:</p>

<div>
<div>
<pre class="source">	final BusinessPartner businessPartnerCopy = businessPartner.createCopy(excludeEmployees, PropertyTreeUse.INCLUDE);
</pre></div></div>

<p>or</p>

<div>
<div>
<pre class="source">	final BusinessPartner businessPartnerCopy = businessPartner.copyOnly(excludeEmployees);
</pre></div></div>

<p>which will result in a businessPartnerCopy where every property is set to null, except the company property, and in the attached company object, every property is null except &#x201c;employees&#x201d;.</p>
<p>This works for single and multi-valued properties, where for multi-valued properties, the property tree applies to all elements of the list of values in the same way. As of yet, there is no way to make a tree apply only to specific indexes in generated lists.</p></div>
<div class="section">
<h3><a name="Limitations"></a>Limitations</h3>
<ul>

<li>The <tt>-narrow</tt> option is a somewhat special use case and should be used carefully.</li>
</ul></div>
<div class="section">
<h3><a name="Usage"></a>Usage</h3>
<div class="section">
<h4><a name="a-Xcopy"></a>-Xcopy</h4></div>
<div class="section">
<h4><a name="Options"></a>Options</h4>
<div class="section">
<h5><a name="a-partial.3D.7By.7Cn.7D_.28y.29"></a>-partial=<tt>{y|n}</tt> (y)</h5>
<p>Generates an additional &#x2018;createCopy&#x2019;-method and copy-constructor (if constructors are to generated at all) that takes a PropertyTree instance to restrict the copy operation to selected nodes in the object tree.</p></div>
<div class="section">
<h5><a name="a-generateTools.3D.7By.7Cn.7D_.28y.29"></a>-generateTools=<tt>{y|n}</tt> (y)</h5>
<p>Generate utility classes as source code. If you say &#x201c;no&#x201d; here, you will have to add the plugin JAR to the runtime classpath of the generated class domain.</p></div>
<div class="section">
<h5><a name="a-constructor.3D.7By.7Cn.7D_.28y.29"></a>-constructor=<tt>{y|n}</tt> (y)</h5>
<p>Generates a copy constructor on each of the classes generated from the current XSD model.</p></div>
<div class="section">
<h5><a name="a-narrow.3D.7By.7Cn.7D_.28n.29"></a>-narrow=<tt>{y|n}</tt> (n)</h5>
<p>Uses copy constructors for all child nodes in the object tree as long as they are available. This will cause the new instance to be as narrow as possible to the declared types.</p></div>
<div class="section">
<h5><a name="a-selectorClassName.3D.3Cstring.3E_.28Selector.29"></a>-selectorClassName=<tt>&lt;string&gt;</tt> (Selector)</h5>
<p>Name of the generated nested &#x201c;Selector&#x201d; builder class, used to build up a property tree for partial copy functionality. This setting will also affect the &#x201c;fluent-builder&#x201d; plugin if it is active and set to &#x201c;copy-partial=y&#x201d;.</p></div>
<div class="section">
<h5><a name="a-rootSelectorClassName.3D.3Cstring.3E_.28Select.29"></a>-rootSelectorClassName=<tt>&lt;string&gt;</tt> (Select)</h5>
<p>Name of the generated nested static &#x201c;Select&#x201d; entry point class to be used by client code for the &#x201c;partial copy&#x201d; feature. This setting will also affect the &#x201c;fluent-builder&#x201d; plugin if it is active and set to &#x201c;copy-partial=y&#x201d;.</p></div></div></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2018.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
